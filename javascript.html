<html>
  <head>
    <script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script type="text/javascript">
      // Do not use jQuery or any other libraries for these JavaScript questions.

      // Q1) Complete this function that receives an array of numbers and returns the sum of the values in the array.
      function sumNumberArray(numArray) {
        const sum=numArray.reduce((total, currentNumber) => total + currentNumber);
        return sum;
			}
      var numArray=[3,9,10];
      sumNumberArray(numArray);

      //The following questions below will use this array of Contact objects
      var contacts = [
        { account: "Acme", firstName: "John", lastName: "Snow" },
        { account: "Metal Industries", firstName: "Ted", lastName: "Smith" },
        { account: "Acme", firstName: "Sara", lastName: "Butler" },
        { account: "HiTech Corp", firstName: "Sam", lastName: "Johnson" },
        { account: "HiTech Corp", firstName: "Arnold", lastName: "Williams" },
        { account: "Metal Industries", firstName: "Jessica", lastName: "Westcoat" },
        { account: "Acme", firstName: "Kyle", lastName: "Johnson" },
        { account: "HiTech Corp", firstName: "Jason", lastName: "Fernandez" },
      ];

      //Given the code below.....
      var contact = contacts[0];
      contact.firstName = "Scott";

      // Q2 ) What is the value of contacts[0].firstName? Why?
      //  A2) The value of contacts[0].firstName would be "Scott".  If we see lines 28 and 29 the object property is updated based on specific object's index
      //Similarly, given the following array of numbers
      var numberArray = [3, 44, 64];
      var num = numberArray[0];
      num = 13;

      // Q3) What will be the value of numberArray[0]? Why?
      //Answer3)Since the value is being assigned by value and not by reference of elements index directly numberArray[0] value will be  3. 

      // Q4) Complete the convertAccountArrayToObject() function below that accepts an array like 'contacts' above and
      // returns an object with the following object structure below where the key is account name and value is an array of alphabetized full names
      var acctContactObject = {
        Acme: ["John Snow", "Kyle Johnson", "Sara Butler"],
        "HiTech Corp": ["Arnold Williams", "Jason Fernandez", "Sam Johnson"],
        "Metal Industries": ["Jessica Westcoat", "Ted Smith"],
      };

      function convertAccountArrayToObject(contacts) {
        //Return an object structured like the 'acctContactObject' object above
          let accountMap = new Map();
      
          contacts.forEach( contact => {
              let newContactEntry = contact.firstName + ' ' + contact.lastName;
              
              if(accountMap.has(contact.account) ) {
                  let listOfExistingContacts = accountMap.get(contact.account);       
                  listOfExistingContacts.push(newContactEntry);
                  accountMap.set(contact.account, listOfExistingContacts);
              }
              else {
                  let newContactArray = [];
                  newContactArray.push(newContactEntry);
                  accountMap.set(contact.account, newContactArray);
              }
          });
          return accountMap;
      }
      // Q5) See the question in the call back function
      function getContacts() {
        var accountId = "123abc";

        $.get("ajax/contacts.json?id=" + accountId, function (data) {
          //This is an asynchronous callback function
          //This is inside an anonymous function executing asynchronously in a seperate context but it still has the ability to read the value
          // in the 'accountId' var. Why?
          console.log("I see you " + accountId);
          //Even though we have asynchronous callback function code might not execute sequentially under all circumstances thats the reason we are able to read 'accountId' value.
          //In such cases we can use setTimeout which is the asynchronous Web API responsible for handling asynchronous tasks.
        });
      }

      // Q6) What is the difference between the == operator and the === operator? Give an example of why may use one instead of the other.
        //A6) Both are used as comparision operators
            // === operator is a strict comparision to == operator
            // === operator checks for the operands are of similar type where as == operator transforms the operands to similar type before comparision
            function operatorCheck(){
              var stringChar='2';
              var numberChar=2;
              if(stringChar == numberChar){
                //Condition satisfied and logic gets executed
              }
              if(stringChar === numberChar){
                //condition not satisfied
             }
            }
      // Q7) What will the output of the following function be? You can easily run this function and see the output but also explain why?
       // Output: 1,4,3,2
       // setTimeout delays the execution of the logic for handling asynchronous tasks. From the below function if we see there is a setTimeout log2 and log 3 functions.
       //So in the order of execution of given code log 1 executes followed by log4 and then the callbackfunctions.
      function doTimeouts() {
        console.log(1);
        setTimeout(function () {
          console.log(2);
        }, 1000);
        setTimeout(function () {
          console.log(3);
        }, 0);
        console.log(4);
      }
     

      // Q8) JavaScript includes basic string functions like toLowerCase() and toUpperCase(). JavaScript provides a mechanism to attach 
			// custom methods to core objects like String. Do what is necessary to make the commented line below work and output the reversed 
			// value of the 'productName' var.

      var productName = "Smartsheet";
      //console.log( productName.reverse() );
      productName=productName.split("").reverse().join("");
      console.log('productName=='+productName); // Output =teehstramS
      
    </script>
  </head>
  <body>
    <p>View the source code of this page and answer the questions/complete the code.</p>
  </body>
</html>
